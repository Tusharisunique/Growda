{
  "meta": {
    "project": "GROWDA - Federated Learningâ€“Powered Pneumonia Diagnosis System",
    "date": "2025-11-19",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "GROWDA is a federated learning platform enabling hospitals to collaboratively develop an accurate pneumonia diagnosis model from chest X-rays without sharing patient data. The system employs federated training using Flower and TensorFlow for privacy-preserving AI development, featuring a backend API and React-based dashboard for monitoring and diagnosis.",
  "core_goals": [
    "Enable collaborative model training among hospitals while preserving patient privacy through federated learning.",
    "Provide a reliable pneumonia diagnosis tool using the aggregated global model from federated training.",
    "Offer a real-time dashboard for doctors to monitor training progress, metrics, and interact with diagnostic features.",
    "Ensure robustness and reliability in federated training, including client handling, model validation, and server restarts."
  ],
  "key_features": [
    "Federated Training Control API to trigger and monitor federated learning rounds with aggregated status updates.",
    "Metrics History API offering persisted accuracy and client metrics for detailed visualization on the dashboard.",
    "Diagnosis Prediction API allowing upload of chest X-rays for classification into Normal or Pneumonia with confidence and severity outputs.",
    "React frontend dashboard with training controls, live logs, accuracy and client metrics, and diagnosis panel for uploading X-rays.",
    "Federated learning setup using Flower's FedAvg strategy, local training at hospital clients, and global model aggregation at the server.",
    "Robustness features including weight shape validation, handling missing models, client disconnects, and graceful server restarts."
  ],
  "user_flow_summary": [
    "Server initializes with base CNN model and waits for connected hospital clients.",
    "Clients load the global model locally, train on their private data for one epoch, and send updated model weights and metrics back to the server.",
    "Server aggregates received weights using the FedAvg strategy and updates the global model file.",
    "Frontend dashboard polls the backend APIs for training status and historical metrics to display real-time monitoring and logs to doctors.",
    "Doctors upload chest X-rays via the dashboard which are sent to the backend API for pneumonia prediction using the current global model, receiving class and confidence results."
  ],
  "validation_criteria": [
    "API endpoints respond correctly to training triggers, status requests, and prediction uploads with appropriate HTTP status codes.",
    "Federated training rounds execute properly without concurrent runs, validating client participation and weight aggregation.",
    "Historical metrics are accurately recorded, retrievable, and displayed in the frontend dashboard charts.",
    "Prediction API correctly processes valid X-ray uploads and returns expected classifications and confidence scores, handling error cases gracefully.",
    "System reliably handles client disconnects, invalid weights, missing models, and recovers gracefully after server restarts."
  ],
  "code_summary": {
    "tech_stack": [
      "Python 3.9",
      "FastAPI",
      "TensorFlow",
      "Flower",
      "NumPy",
      "React 18",
      "Vite",
      "Tailwind CSS"
    ],
    "features": [
      {
        "name": "Federated Training Control API",
        "description": "Triggers Flower rounds and returns aggregated training status so the frontend dashboard can monitor progress.",
        "files": [
          "backend/main.py",
          "backend/fl_server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/train_round": {
              "post": {
                "summary": "Start a single federated learning round",
                "responses": {
                  "200": {
                    "description": "Round accepted and running"
                  },
                  "400": {
                    "description": "Training already in progress"
                  }
                }
              }
            },
            "/status": {
              "get": {
                "summary": "Fetch global round, accuracy, connected clients, and training flag",
                "responses": {
                  "200": {
                    "description": "Current training status"
                  }
                }
              }
            },
            "/training_status": {
              "get": {
                "summary": "Legacy alias of /status",
                "responses": {
                  "200": {
                    "description": "Current training status"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Metrics History API",
        "description": "Returns persisted round-by-round accuracy and per-client metrics for dashboard charting.",
        "files": [
          "backend/main.py",
          "backend/fl_server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/metrics/history": {
              "get": {
                "summary": "List historical global accuracy and per-client stats",
                "responses": {
                  "200": {
                    "description": "Metrics history payload"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Diagnosis Prediction API",
        "description": "Accepts a chest X-ray upload and returns predicted class, confidence, and severity level using the latest global model.",
        "files": [
          "backend/main.py",
          "backend/model.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/predict": {
              "post": {
                "summary": "Predict pneumonia from uploaded X-ray",
                "requestBody": {
                  "content": {
                    "multipart/form-data": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "file": {
                            "type": "string",
                            "format": "binary"
                          }
                        },
                        "required": [
                          "file"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Prediction completed"
                  },
                  "400": {
                    "description": "Missing model or invalid file"
                  },
                  "500": {
                    "description": "Inference failed"
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
